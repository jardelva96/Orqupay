asyncapi: 3.0.0
info:
  title: Payment Module Core Events
  version: 1.0.0
  description: Canonical event stream for payment lifecycle.
defaultContentType: application/json
channels:
  payment.events:
    address: payment.events
    messages:
      paymentEvent:
        $ref: '#/components/messages/PaymentEvent'
operations:
  publishPaymentEvent:
    action: send
    channel:
      $ref: '#/channels/payment.events'
    messages:
      - $ref: '#/channels/payment.events/messages/paymentEvent'
components:
  messages:
    PaymentEvent:
      name: PaymentEvent
      payload:
        type: object
        additionalProperties: false
        properties:
          id:
            type: string
          api_version:
            type: string
          source:
            type: string
          event_version:
            type: string
          type:
            type: string
            enum:
              - payment_intent.created
              - payment_intent.processing
              - payment_intent.requires_action
              - payment_intent.succeeded
              - payment_intent.failed
              - payment_intent.canceled
              - refund.succeeded
              - refund.failed
              - chargeback.opened
              - chargeback.won
              - chargeback.lost
          occurred_at:
            type: string
            format: date-time
          data:
            type: object
        required:
          - id
          - api_version
          - source
          - event_version
          - type
          - occurred_at
          - data
